"use strict";var sendFile=function(e,t,a){var s=new FormData;s.append("file",e),$.ajax({data:s,type:"POST",url:"/editorimageuploads",cache:!1,contentType:!1,processData:!1,success:function(e){var t=e.fileName,a=e.filePath;$(".summernote-editor").summernote("insertImage",a,t)}})},menuPositionUpdate=function(e){var t=$(".alert.menu-pos-alert");t&&t.fadeOut(),$(".page-body").before('<div class="alert alert-success alert-dismissible fade show menu-pos-alert" role="alert">\n        <strong>Success: </strong> '.concat(e,' position update.\n        <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n        <span aria-hidden="true">&times;</span>\n        </button>\n        </div>'))};$(function(){$(".summernote-editor").summernote({minHeight:500,callbacks:{onImageUpload:function(e,t,a){sendFile(e[0],t,a)}}})}),$(".datepicker").datepicker(),$("#media-select-search").keyup(function(){var e=$(this).val();if(e.length<4)return!1;$.ajax({type:"GET",url:"/api/media/search/".concat(e),success:function(e){if($(".analog-modal.media-select .media-grid").empty(),e.length)return e.forEach(function(e,t){$(".media-grid").append('<div id="media-'.concat(t,'" data-id="').concat(e._id,'" data-path="').concat(e.path,'" class="col-4 col-md-3 col-lg-2 media-grid-item"\n                        style="background-image: url(\'').concat(e.path,"')\"></div>"))}),$(".analog-modal").addClass("active");$(".media-grid").append('<div class="col-12"><h4>No media found.</h4></div>')},error:function(e){$(".custom-fields-notifications .alert").remove(),$(".custom-fields-notifications").append('<div class="alert alert-warning alert-dismissible fade show" role="alert">\n            <strong>Error: </strong> '.concat(e.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))}})}),$(".cms-menu .nav-item.nav-has-submenu").hover(function(){var e=$(this);return!e.hasClass("current")&&e.addClass("expanded")},function(){var e=$(this);return!e.hasClass("current")&&e.removeClass("expanded")}),$("body").on("mouseup",".analog-modal.media-select.active button.select",function(){var e=$(".analog-modal.media-select.active .media-grid-item.selected");if(!e.length)return!1;var t=e.data("id"),a=e.data("path");$(".image-upload-thumb").removeClass("no-image").addClass("image-exists").css("background-image","url('".concat(a,"')")).empty(),$("input#_image").val(t),$(".analog-modal .media-grid").empty()}),$("body").on("mouseup",".analog-modal.media-select.active button.dismiss",function(){$(".analog-modal .media-grid").empty()}),$("body").on("click",".analog-modal.media-select.active .media-grid-item",function(){var e=$(this);return e.hasClass("selected")?e.removeClass("selected"):($(".media-grid-item").removeClass("selected"),e.addClass("selected")),!1}),$(".image-upload-thumb").click(function(){$.ajax({type:"GET",url:"/api/media/",success:function(e){if($(".analog-modal.media-select .media-grid").empty(),e.length)return e.forEach(function(e,t){$(".media-grid").append('<div id="media-'.concat(t,'" data-id="').concat(e._id,'" data-path="').concat(e.path,'" title="').concat(e.fileName,'" class="col-4 col-md-3 col-lg-2 media-grid-item"\n                        style="background-image: url(\'').concat(e.path,"')\"></div>"))}),$(".analog-modal").addClass("active");$(".analog-modal").addClass("active"),$(".media-grid").append('<div class="col-12"><h4>No media found.</h4></div>')},error:function(e){$(".custom-fields-notifications .alert").remove(),$(".custom-fields-notifications").append('<div class="alert alert-warning alert-dismissible fade show" role="alert">\n            <strong>Error: </strong> '.concat(e.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))}})}),$(".analog-modal .modal-footer button").click(function(){var e=$(".analog-modal");$(this).hasClass("update")&&$("#updatemedia").submit(),e.removeClass("active")}),$("#image-upload-thumb-rm").click(function(){var t=$(this),e=t.data("id"),a=t.data("delajaxurl");if(!e||!a)return!1;$.ajax({type:"POST",url:a,data:{_id:e},success:function(e){t.remove(),$("input#_image").val(""),$(".image-upload-thumb.image-exists").css("background-image","none").addClass("no-image"),$(".image-upload-thumb.image-exists i").removeClass("d-none"),$(".custom-fields-notifications").append('<div class="alert alert-success alert-dismissible fade show" role="alert">\n            <strong>Success: </strong> '.concat(e.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))},error:function(e){$(".custom-fields-notifications").append('<div class="alert alert-warning alert-dismissible fade show" role="alert">\n            <strong>Error: </strong> '.concat(e.responseJSON.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))}}).always(function(){$(".custom-fields-notifications .alert").remove()})}),$(".page-link.directional").click(function(){event.preventDefault();var e=$(".page-item.active"),t=e.next(),a=e.prev();if($(this).hasClass("next"))return t.find("a.page-link")[0].click(),!1;a.find("a.page-link")[0].click()}),$("body").on("click",".editcustomfield",function(){var e=$(this),t=e.data("cf"),a=$(t).find(".updatecustomfield"),s=$(t).find("input"),i=$(t).find("button.btn-danger");s.prop("disabled",!1),a.show(),e.hide(),i.hide()}),$("body").on("click",".deletecustomfield",function(){$this=$(this);var e=$this.data("id"),t=$this.data("row");$.ajax({type:"POST",url:"/deletecustomfield",data:{_id:e},success:function(e){$(".custom-fields-notifications").append('<div class="alert alert-success alert-dismissible fade show" role="alert">\n            <strong>Success: </strong> '.concat(e.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>')),$(t).remove()},error:function(e){$(".custom-fields-notifications").append('<div class="alert alert-warning alert-dismissible fade show" role="alert">\n            <strong>Error: </strong> '.concat(e.responseJSON.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))}}).always(function(){$(".custom-fields-notifications .alert").remove()})}),$("body").on("click",".updatecustomfield",function(){var e=$(this).data("cf"),t=$(e).find("input[name=slug]"),a=$(e).find("input[name=value]"),s=$(e).find("button.btn-danger"),i=$(e).find("button.editcustomfield"),n=$(e).find("button.updatecustomfield"),l=t.val().trim(),o=a.val().trim(),d=$(e).find("input[name=_id]").val();if(!l)return $("#new-custom-field").addClass("was-validated"),!1;$.ajax({type:"POST",url:"/updatecustomfield",data:{_id:d,slug:l,value:o},success:function(e){t.prop("disabled",!0),a.prop("disabled",!0),$(".custom-fields-notifications").append('<div class="alert alert-success alert-dismissible fade show" role="alert">\n            <strong>Success: </strong> '.concat(e.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))},error:function(e){$(".custom-fields-notifications").append('<div class="alert alert-warning alert-dismissible fade show" role="alert">\n            <strong>Error: </strong> '.concat(e.responseJSON.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))}}).always(function(){$(".custom-fields-notifications .alert").remove(),n.hide(),s.show(),i.show()})}),$("#addcustomfield").click(function(){var t=$("#new-custom-field-slug"),a=$("#new-custom-field-value"),e=t.val().trim(),s=a.val().trim(),i=$("#new-custom-field-ownerModel").val(),n=$("#new-custom-field-owner").val();if(!e)return t.addClass("is-invalid"),!1;$.ajax({type:"POST",url:"/addcustomfield",data:{slug:e,value:s,ownerModel:i,owner:n},success:function(e){$(".custom-fields-notifications").append('<div class="alert alert-success alert-dismissible fade show" role="alert">\n            <strong>Success: </strong> '.concat(e.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>')),$("#custom-fields-list").append('\n                    <div id="cf-'.concat(e.created._id,'" class="row custom-field">\n                    <div class="col-6 col-md-4">\n                        <input id="new-custom-field-slug" name="slug" type="text" class="form-control"\n                            placeholder="Enter slug ..." value="').concat(e.created.slug,'" required disabled></input>\n                        <div class="invalid-feedback">Required.</div>\n                    </div>\n                    <div class="col-6 col-md-4">\n                        <input id="new-custom-field-value" name="value" type="text" class="form-control"\n                            placeholder="Enter value ..." value="').concat(e.created.value,'" disabled></input>\n                    </div>\n                    <div class="col-4">\n                        <input id="new-custom-field-id" type="hidden" name="_id" value="').concat(e.created._id,'">\n                        <button type="button" class="btn btn-success editcustomfield" data-cf="#cf-').concat(e.created._id,'"><i class="far fa-edit"></i></button>\n                        <button type="button" class="btn btn-info updatecustomfield" data-cf="#cf-').concat(e.created._id,'">Update</button>\n                        <button type="button" class="btn btn-danger deletecustomfield" data-row="#cf-').concat(e.created._id,'" data-id="').concat(e.created._id,'"><i class="far fa-trash-alt"></i></button>\n                    </div>\n                </div>')),$(".no-cf-alert").remove(),t.val("").removeClass("is-invalid"),a.val("")},error:function(e){$(".custom-fields-notifications").append('<div class="alert alert-warning alert-dismissible fade show" role="alert">\n            <strong>Error: </strong> '.concat(e.responseJSON.message,'\n            <button type="button" class="close" data-dismiss="alert" aria-label="Close">\n            <span aria-hidden="true">&times;</span>\n            </button>\n            </div>'))}}).always(function(){$(".custom-fields-notifications .alert").remove()})}),$(".section-head").click(function(){var e=$(this).find(".section-toggle-controls");e.hasClass("expanded")?e.removeClass("expanded"):e.addClass("expanded")}),$(".add-item-overlay, .add-project-overlay").click(function(){return $(this).hasClass("active")?$(this).removeClass("active"):$(this).addClass("active"),!1}),$(".mobile-menu-toggle").click(function(){return $("body").hasClass("mobile-menu-active")?$("body").removeClass("mobile-menu-active"):$("body").addClass("mobile-menu-active"),!1}),$(".listCheckbox.selectAll").click(function(){if($(".listCheckbox.selectAll:checked").length)return $("#list .listCheckbox.selectSingle").prop("checked",!0);$("#list .listCheckbox.selectSingle:checked").prop("checked",!1)}),$(".listCheckbox").click(function(){if($("#list .listCheckbox.selectSingle:checked").length)return $("#multi-edit-select, #submit_list_multi_edit").prop("disabled",!1);$("#multi-edit-select, #submit_list_multi_edit").prop("disabled",!0)}),$("#submit_list_multi_edit").click(function(){var a=[],e=$(this).data("url"),t=$("#multi-edit-select option:selected").val(),s=$("#select-template option:selected").val()||$("#select-status option:selected").val()||$("#select-target").val();$("#list .listCheckbox.selectSingle:checked").each(function(e,t){a.push($(t).val())}),$.ajax({type:"POST",url:e,data:{list_id_arr:a,update_criteria:t,update_value:s},success:function(){location.reload()}})}),$("#multi-edit-select").change(function(){var e=$(this).val();return"status"==e?($("#select-template").hide(),$("#select-status").show()):"template"==e?($("#select-status").hide(),$("#select-template").show()):"target"==e?$(".multiple-target-field").show():($("#select-template").hide(),$("#select-status").hide(),void $(".multiple-target-field").hide())}),$("#paginationlimit").change(function(){var e=$(this).val(),t=window.location.href;if(0<=t.indexOf("limit="))return t=t.substring(0,t.indexOf("limit=")+"limit=".length),location.href="".concat(t).concat(e),!1;var a=-1!==t.indexOf("&")?"&limit=":"?limit=";location.href="".concat(t).concat(a).concat(e)});